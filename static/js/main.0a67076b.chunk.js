(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{20:function(e,t,n){e.exports=n(33)},25:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var r,a=n(1),c=n.n(a),i=n(11),s=n.n(i),u=(n(25),n(8));!function(e){e.FETCH_ARTICLES="FETCH_ARTICLES",e.UPDATE_ARTICLES_LIST="UPDATE_ARTICLES_LIST",e.SET_IS_LOADING="SET_IS_LOADING",e.DELETE_ARTICLE="DELETE_ARTICLE",e.CHANGE_LIKE_ARTICEL="CHANGE_LIKE_ARTICLE"}(r||(r={}));var l=function(e){return{type:r.UPDATE_ARTICLES_LIST,articles:e}},o=function(e){return{type:r.SET_IS_LOADING,isLoading:e}},d={fetchArticles:function(e){return{type:r.FETCH_ARTICLES,subreddit:e}}},E=Object(u.b)(null,d)((function(e){var t=e.title,n=e.subreddit,r=e.fetchArticles;return c.a.createElement("div",{onClick:function(){return r(n)},className:"block"},t)})),f=function(){return c.a.createElement("div",{className:"preloader_wrapper"},c.a.createElement("div",{className:"preloader_circle"}))},p={changeLikeArticle:function(e,t){return{type:r.CHANGE_LIKE_ARTICEL,id:e,isLiked:t}},deleteArticle:function(e){return{type:r.DELETE_ARTICLE,id:e}}},b=Object(u.b)(null,p)((function(e){var t=e.title,n=e.url,r=e.id,i=e.isLiked,s=e.changeLikeArticle,u=e.deleteArticle,l=Object(a.useCallback)((function(){s(r,i)}),[r,i]),o=Object(a.useCallback)((function(){u(r)}),[]);return c.a.createElement("div",{className:"article"},c.a.createElement("div",{onClick:l,className:"like".concat(i?" is_liked":"")}),c.a.createElement("div",{onClick:o,className:"bucket"}),c.a.createElement("a",{href:n,target:"_blank"},t))})),m=Object(u.b)((function(e){return{articles:e.articles,isLoading:e.isLoading}}))((function(e){var t=e.articles,n=e.isLoading;return c.a.createElement(c.a.Fragment,null,t.map((function(e){return c.a.createElement(b,Object.assign({key:e.id},e))})),n&&c.a.createElement(f,null))}));var L=function(){return c.a.createElement("div",{className:"App"},c.a.createElement("div",{className:"blocks_wrapper"},c.a.createElement(E,{title:"Frontend",subreddit:"frontend"}),c.a.createElement(E,{title:"ReactJs",subreddit:"reactjs"}),c.a.createElement(E,{title:"VueJs",subreddit:"vuejs"}),c.a.createElement(E,{title:"Angular",subreddit:"angular"}),c.a.createElement(m,null)))},_=n(9),I=n(10),O=localStorage.getItem("articles"),T={articles:O?JSON.parse(O):[],isLoading:!1},v=n(19),g=n(5),A=n.n(g),S=n(18),k=n(6),j=function(e){var t=Math.random()*e;return Math.round(t)},C=function(e){localStorage.setItem("articles",JSON.stringify(e))},h=function(){var e=localStorage.getItem("buffer");return e?JSON.parse(e):{}},w=function(e){localStorage.setItem("buffer",JSON.stringify(e))},x=function(e,t){setTimeout((function(){(function(e){var t=h();return console.log(t,t[e]),t[e]&&(delete t[e],w(t)),t})(e)}),12e4)},N=A.a.mark(U),R=A.a.mark(K),D=A.a.mark(M),y=A.a.mark(V),G=A.a.mark(X),H=A.a.mark(B),J=A.a.mark(q),F=h();for(var P in F)x(P);function U(e){var t,n,r,a,c,i,s,u,d,E,f,p;return A.a.wrap((function(b){for(;;)switch(b.prev=b.next){case 0:return r=e.subreddit,a=Y.getState().articles,b.next=4,Object(k.c)(o(!0));case 4:if(console.log(null===(t=F[r])||void 0===t?void 0:t.length,"lenght"),null===(n=F[r])||void 0===n?void 0:n.length){b.next=15;break}return b.next=8,Object(k.b)(fetch,"https://www.reddit.com/r/".concat(r,".json"));case 8:return c=b.sent,b.next=11,Object(k.b)((function(){return c.json()}));case 11:i=b.sent,F[r]=i.data.children.map((function(e){return e.data})),w(F),x(r);case 15:return s=j(F[r].length-1),console.log(s,"index"),u=F[r].splice(s,1)[0],console.log(u,"new article"),d=u.title,E=u.url,f=u.name,p=[].concat(Object(S.a)(a),[{title:d,url:E,id:"".concat(f,"_").concat(performance.now()),isLiked:!1}]),b.next=23,Object(k.c)(l(p));case 23:return C(p),w(F),b.next=27,Object(k.c)(o(!1));case 27:case"end":return b.stop()}}),N)}function K(e){var t,n,r,a,c;return A.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(t=e.id,n=e.isLiked,r=Y.getState().articles.slice(),-1===(a=r.findIndex((function(e){return e.id===t})))){i.next=9;break}return c=Object.assign({},r[a],{isLiked:!n}),r.splice(a,1,c),i.next=8,Object(k.c)(l(r));case 8:C(r);case 9:case"end":return i.stop()}}),R)}function M(e){var t,n,r;return A.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.id,n=Y.getState().articles.slice(),-1===(r=n.findIndex((function(e){return e.id===t})))){a.next=8;break}return n.splice(r,1),a.next=7,Object(k.c)(l(n));case 7:C(n);case 8:case"end":return a.stop()}}),D)}function V(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.e)(r.FETCH_ARTICLES,U);case 2:case"end":return e.stop()}}),y)}function X(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.d)(r.DELETE_ARTICLE,M);case 2:case"end":return e.stop()}}),G)}function B(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.d)(r.CHANGE_LIKE_ARTICEL,K);case 2:case"end":return e.stop()}}),H)}function q(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.a)([V(),B(),X()]);case 2:case"end":return e.stop()}}),J)}var z=Object(v.a)(),Q=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||_.c,W=Object(_.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.UPDATE_ARTICLES_LIST:return Object(I.a)(Object(I.a)({},e),{},{articles:t.articles});case r.SET_IS_LOADING:return Object(I.a)(Object(I.a)({},e),{},{isLoading:t.isLoading});default:return e}}),Q(Object(_.a)(z)));z.run(q);var Y=W;s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(u.a,{store:Y},c.a.createElement(L,null))),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.0a67076b.chunk.js.map